---
// src/pages/booking.astro
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Contact">
  <section class="pt-36 pb-20 max-w-7xl mx-auto px-8">

	<h1 class="font-serif text-5xl text-center text-cream mb-12 border-b border-gold/30 pb-3">
	  Get In Touch
	</h1>

	<div class="grid md:grid-cols-3 gap-12">

	  <!-- Left contact info -->
	  <div class="md:col-span-1 p-6 bg-cream/5 rounded-lg border border-gold/20 h-fit">
		<h2 class="font-serif text-3xl text-gold mb-4">Inquiries</h2>

		<p class="text-lg text-cream/80 mb-6">
		  For all booking and press-related questions, please use the contacts below or fill out the form.
		</p>

		<ul class="space-y-4">
		  <li>
			<h3 class="font-semibold text-cream">Booking & Management</h3>
			<a href="mailto:booking@romanstreet.com" class="text-gold hover:text-cream transition">booking@romanstreet.com</a>
		  </li>
		  <li>
			<h3 class="font-semibold text-cream">Press & Media</h3>
			<a href="mailto:press@romanstreet.com" class="text-gold hover:text-cream transition">press@romanstreet.com</a>
		  </li>
		  <li>
			<h3 class="font-semibold text-cream">General Questions</h3>
			<a href="mailto:info@romanstreet.com" class="text-gold hover:text-cream transition">info@romanstreet.com</a>
		  </li>
		</ul>
	  </div>

	  <!-- Right form -->
	  <div class="md:col-span-2">
		<form id="contact-form" class="space-y-6 bg-charcoal/20 p-8 rounded-lg border border-gold/20 shadow-lg">

		  <div>
			<label for="name" class="block text-cream font-semibold mb-2">Name</label>
			<input type="text" id="name" name="name" required
			  class="w-full bg-charcoal/50 text-cream border border-gold/50 focus:border-gold p-3 rounded outline-none" />
		  </div>

		  <div>
			<label for="email" class="block text-cream font-semibold mb-2">Email</label>
			<input type="email" id="email" name="email" required
			  class="w-full bg-charcoal/50 text-cream border border-gold/50 focus:border-gold p-3 rounded outline-none" />
		  </div>

		  <div>
			<label for="subject" class="block text-cream font-semibold mb-2">Inquiry Type</label>
			<select id="subject" name="subject"
			  class="w-full bg-charcoal/50 text-cream border border-gold/50 focus:border-gold p-3 rounded outline-none appearance-none">
			  <option value="general">General Question</option>
			  <option value="booking">Booking Inquiry</option>
			  <option value="press">Press/Media Request</option>
			</select>
		  </div>

		  <div>
			<label for="message" class="block text-cream font-semibold mb-2">Message</label>
			<textarea id="message" name="message" rows="5" required
			  class="w-full bg-charcoal/50 text-cream border border-gold/50 focus:border-gold p-3 rounded outline-none resize-none"></textarea>
		  </div>

		  <button type="submit"
			class="bg-gold text-charcoal px-6 py-3 rounded-full font-bold uppercase hover:opacity-90 transition shadow-lg">
			Send Message
		  </button>

		  <p id="form-status" class="text-cream font-semibold mt-2 hidden"></p>

		</form>
	  </div>

	</div>
  </section>

  <script>
	const form = document.getElementById("contact-form");
	const status = document.getElementById("form-status");

	form.addEventListener("submit", async (e) => {
	  e.preventDefault();
	  status.classList.add("hidden");
	  status.textContent = "";

	  const submitButton = form.querySelector("button[type='submit']");
	  submitButton.disabled = true;
	  submitButton.textContent = "Sending...";

	  const formData = new FormData(form);

	  try {
		const response = await fetch("/api/contact", {
		  method: "POST",
		  body: formData
		});

		const result = await response.json();

		if (response.ok) {
		  status.textContent = "Your inquiry has been sent successfully!";
		  status.classList.remove("hidden");
		  status.classList.add("text-green-500");
		  form.reset();
		} else {
		  throw new Error(result.message || "Failed to send your inquiry.");
		}

	  } catch (err) {
		status.textContent = err.message;
		status.classList.remove("hidden");
		status.classList.add("text-red-500");
	  } finally {
		submitButton.disabled = false;
		submitButton.textContent = "Send Message";
	  }
	});
  </script>
</BaseLayout>
